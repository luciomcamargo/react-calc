{"ast":null,"code":"'use strict';\n\nvar seedrandom = require('seed-random'); // create a random seed here to prevent an infinite loop from seed-random\n// inside the factory. Reason is that math.random is defined as a getter/setter\n// and seed-random generates a seed from the local entropy by reading every\n// defined object including `math` itself. That means that whilst getting\n// math.random, it tries to get math.random, etc... an infinite loop.\n// See https://github.com/ForbesLindesay/seed-random/issues/6\n\n\nvar singletonRandom = seedrandom();\n\nfunction factory(type, config, load, typed, math) {\n  var random; // create a new random generator with given seed\n\n  function setSeed(seed) {\n    random = seed === null ? singletonRandom : seedrandom(String(seed));\n  } // initialize a seeded pseudo random number generator with config's random seed\n\n\n  setSeed(config.randomSeed); // wrapper function so the rng can be updated via generator\n\n  function rng() {\n    return random();\n  } // updates generator with a new instance of a seeded pseudo random number generator\n\n\n  math.on('config', function (curr, prev, changes) {\n    // if the user specified a randomSeed\n    if (changes.randomSeed !== undefined) {\n      // update generator with a new instance of a seeded pseudo random number generator\n      setSeed(curr.randomSeed);\n    }\n  });\n  return rng;\n}\n\nexports.factory = factory;\nexports.math = true;","map":null,"metadata":{},"sourceType":"script"}